<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        
        body{
    width: 33%;
    }
    #btns > button{
        width: 25%;
        height: 36px;
        font-size: 18px;
        margin: 0;
        float: left;
    }
    #res{
        background-color: lightgray;
        border: solid;
        height: 48px;
        font-size: 20px;
    }
    #btn1, #btn0{
        background-color: lightgreen;
        color: brown;
    }
    #btnClr, #btnEql{
        background-color: darkgreen;
        color: white;
    }
    #btnSum, #btnSub, #btnDiv, #btnMul{
        background-color: black;
        color: red;
    }

    </style>
</head>
    <body>
        <div id="container">
            <div id="response">
                <div id="res">

                </div>
            </div>
            <div id="btns">
                <button id="btn0" onclick="clickZero()">0</button>
                <button id="btn1" onclick="clickOne()">1</button>
                <button id="btnClr" onclick="clickClr()">C</button>
                <button id="btnEql" onclick="clickEql()">=</button>
                <button id="btnSum" onclick="clickSum()">+</button>
                <button id="btnSub" onclick="clickSub()">-</button>
                <button id="btnMul" onclick="clickMul()">*</button>
                <button id="btnDiv" onclick="clickDiv()">/</button>
            </div>
        </div>
    <script>
        let res = document.getElementById('res');
        let sum = document.getElementById('btnSum');
        let sub = document.getElementById('btnSub');
        let div = document.getElementById('btnDiv');
        let mul = document.getElementById('btnMul');
        let one = document.getElementById('btn1');
        let cero = document.getElementById('btn0');
        let clr = document.getElementById('BtnClr');

        function checkOperator(){
            if (res.innerHTML.endsWith('+') || res.innerHTML.endsWith('-') ||
            res.innerHTML.endsWith('*') || res.innerHTML.endsWith('/')) {
                return true
            }
        }

        function clickOne() {
            res.innerHTML += '1';
        };

        function clickZero() {
            res.innerHTML += '0';
        };

        function clickSum(){
           if (res.innerHTML.length !== 0 && !checkOperator()) {
            res.innerHTML += '+'; 
           }
        };

        function clickSub() {
            if (res.innerHTML.length !== 0 && !checkOperator()) {
                res.innerHTML += '-';
            }
        };

        function clickDiv(){
            if (res.innerHTML.length !== 0 && !checkOperator()) {
                res.innerHTML += '/';
            }
        };

        function clickMul(){
            if (res.innerHTML.length !== 0 && !checkOperator()) {
                res.innerHTML += '*';
            }
        };

        function clickClr() {
            res.innerHTML = '';
        };

        function clickEql(){
            if (!checkOperator()) {
                let re = /\d+/g
    let re2 = /[\+\-\*\/]+/g
    let num = res.innerHTML.match(re);
    let operations = res.innerHTML.match(re2);
    while(operations.length > 0){
        if(operations.includes('*')){
            let indexOfMul = operations.indexOf('*');
            let mul = (indexOfMul !== 0 ? parseInt(num[indexOfMul-1],2)
            : parseInt(num[indexOfMul],2)) * parseInt(num[indexOfMul+1],2);
            num.splice(indexOfMul, 2);
            num.splice(indexOfMul, 0, mul.toString(2));
        }else if(operations.includes('/')){
            let indexOfDiv = operations.indexOf('/');
            let division = (indexOfDiv !== 0 ? parseInt(num[indexOfDiv-1],2)
            : parseInt(num[indexOfDiv],2))/ parseInt(num[indexOfDiv+1],2);
            num.splice(indexOfDiv,2);
            num.splice(indexOfDiv, 2, division.toString(2));
            operations.splice(indexOfDiv,1);
        }else if(operations.includes('+')){
            let indexOfSum = operations.indexOf('+');
            let sum = (indexOfSum !== 0 ? parseInt(num[indexOfSum-1],2)
            : parseInt(num[indexOfSum],2))+ parseInt(num([indexOfSum+1],2));
            num.splice(indexOfSum,2);
            num.splice(indexOfSum, 0, sum.toString(2));
            operations.splice(indexOfSum,1);
        }else if (operations.includes('-')){
            let indexOfSub = operations.indexOf('-');
            let sub = (indexOfSub !== 0 ? parseInt(num[indexOfSub-1],2)
            : parseInt(num[indexOfSub],2))- parseInt(num[indexOfSub+1],2);
            num.splice(indexOfSub,2);
            num.splice(indexOfSub, 0, sub.toString(2));
            operations.splice(indexOfSub,);
                    }
                }
                res.innerHTML = parseInt(num[0].toString(2));
            }else {
                console.log('Line must end with a number');
            }
        }

        
       

    </script>
    
</body>
</html>